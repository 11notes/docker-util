#!/bin/sh
  # eleven shrink /path/to/binary/to/be/stripped

  if [ -f "${1}" ]; then
    chmod +x "${1}"
    BYTES_START=$(du -b "${1}" | cut -f1)
    /usr/local/bin/upx -q --best --ultra-brute --no-backup "${1}" &> /dev/null
    BYTES_END=$(du -b "${1}" | cut -f1)
    BYTES_PERCENT=$((100 - (200*${BYTES_END}/${BYTES_START} % 2 + 100*${BYTES_END}/${BYTES_START})))
    BYTES_MB=$(((${BYTES_START} - ${BYTES_END})/1024))
    eleven log info "${1} was shrunk by ${BYTES_MB}MB (${BYTES_PERCENT}%)!"
  else
    eleven log warning "could not find file [${1}]"
    exit 1
  fi

  exit 0